# 侧边栏菜单修改方法文档

## 概述
本文档详细说明了如何在项目中修改侧边栏菜单，包括隐藏、删除、添加、重新排序和调整菜单结构等操作，并涵盖了多角色权限和动态路由的相关注意事项。

## 1. 菜单文件结构
- **核心文件**: `src/store/index.js`
- **菜单数据**: 该文件中的 `state` 对象包含了所有用户角色的菜单配置。
  - `menuItems`: 默认/基础菜单（通常在演变为多角色后作为模板或废弃）。
  - `adminMenuItems`: **管理员**账号看到的菜单。
  - `userMenuItems`: **学校**账号看到的菜单。
  - `companyMenuItems`: **企业**账号看到的菜单。

**重要**: 当修改菜单时，必须根据需求**在所有相关的角色菜单数组中**进行修改，以确保一致性。

## 2. 隐藏菜单项
通过设置 `hidden: true`，可以将菜单项从侧边栏视图中隐藏，但对应的路由页面仍然可以通过URL直接访问。这是推荐的、非破坏性的隐藏方法。

### 示例：
```javascript
{
    name: 'resumegenerate',
    text: '简历生成',
    hidden: true, // 添加此属性即可隐藏
},
```

## 3. 调整菜单顺序
菜单项在侧边栏的显示顺序由它们在数组中的位置决定。要调整顺序，只需在对应的菜单数组中移动整个对象即可。

### 示例：将“学生画像”移动到“人岗匹配”之前

**调整前**:
```javascript
//...
{ name: 'jobportray', text: '人岗匹配' },
{ name: 'radar', text: '学生画像' },
//...
```

**调整后**:
```javascript
//...
{ name: 'radar', text: '学生画像' },
{ name: 'jobportray', text: '人岗匹配' },
//...
```

## 4. 调整菜单结构
有时需要将一个子菜单项提升为顶级菜单项。

### 示例：将“简历生成”从“人岗匹配”中独立出来

**调整前**:
```javascript
{
    text: '人岗匹配',
    children: [
        { name: 'resumegenerate', text: '简历生成' }
    ]
},
```

**调整后**:
```javascript
{ name: 'jobportray', text: '人岗匹配' },
{ name: 'resumegenerate', text: '简历生成', hidden: true }, // 独立并隐藏
```

## 5. 路由与重定向注意事项
本项目的路由是动态生成的，并且会根据用户权限自动重定向到其有权访问的第一个页面。

- **配置文件**: `src/permission.js`
- **机制**: 登录后，系统会遍历当前角色菜单（例如 `userMenuItems`），找到第一个 `hidden` 不为 `true` 的有效路由，并将其设为默认首页。
- **避免404**: 这个机制避免了当默认页面（如旧版的 `/` 重定向到 `/jobportray`）被隐藏时，用户登录后直接进入404页面的问题。

因此，在隐藏或调整菜单时，您无需担心默认首页失效的问题，系统会自动寻找下一个可用的页面。

## 6. 其他操作

- **添加新菜单**: 在相应角色的菜单数组中，按照现有格式添加新的菜单对象。确保 `name` 属性对应的值已经在 `src/router/index.js` 的 `asyncRoutes` 中有定义。
- **彻底删除菜单**: 如果确定某个功能永久下线，可以直接从所有角色菜单的数组中删除对应的菜单对象。这是一种破坏性操作，请谨慎使用。 